System.register("chunks:///_virtual/mainPanel",["./mainPanel.ts"],(function(){return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/mainPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./panelBasic.ts","./GameGlobal.ts","./EventUtil.ts","./LoadUtil.ts","./AudioManage.ts","./BundleLayer.ts","./HtmlUtil.ts","./telegram-web.ts","./TimeUtil.ts","./ModuleManager.ts","./LanguageData.ts","./NodeUtil.ts","./GlobalManager.ts"],(function(e){var t,a,n,i,o,r,s,l,u,d,c,p,g,h,m,f,S,y,w,P,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Node,o=e.Label,r=e.Sprite,s=e._decorator},function(e){l=e.default},function(e){u=e.GameGlobal},function(e){d=e.default},function(e){c=e.default},function(e){p=e.AudioManage,g=e.SoundList},function(e){h=e.default},function(e){m=e.default},function(e){f=e.TelegramWebApp},function(e){S=e.TimeUtil},function(e){y=e.default},function(e){w=e.LanguageData},function(e){P=e.NodeUtil},function(e){b=e.default}],execute:function(){var L,M,v,T,B,C,H,D,_,U,z;n._RF.push({},"2dfdfYhqUpHU6YYfddZRwv4","mainPanel",void 0);const{ccclass:G,property:I}=s;e("mainPanel",(L=G("mainPanel"),M=I(i),v=I(o),T=I(r),B=I(i),L((D=t((H=class extends l{constructor(){super(...arguments),a(this,"airdropParent",D,this),a(this,"remainCountLab",_,this),a(this,"adsSprite",U,this),a(this,"adLayout",z,this),this.soundState=void 0}get showNode(){return this.main}async onInit(e){this._initData(),await super.onInit(e)}_initData(){this._refreshLeftTime(),d.on("leftTimeChange",this._refreshLeftTime,this);const e=u.instance.serverConfig.mainPage;if(this.adsSprite.node.active=!!e.ads,e.ads&&c.getSpriteFrameIntelligent(e.ads,(e=>{this.isValid&&e&&P.limitSpriteSize(this.adsSprite,e)})),e.activeAwardScores){const t=[1,2,0];for(let a=0;a<3;a++){const n=e.activeAwardScores[a],i=this.adLayout.children[t[a]],s=i.getChildByName("icon").getComponent(r),l=i.getChildByName("scoreLabel").getComponent(o);c.getSpriteFrameIntelligent(n.icon,(e=>{this.isValid&&e&&(s.spriteFrame=e,P.limitSpriteSize(s,e))}));const u=n.score.toString();l.string=+u?"":w.translateArgs("points_mainAd",u)}}}_refreshLeftTime(){this.remainCountLab.string="X "+u.instance.accountInfo.times}async onShow(e){this._initData(),this.soundState=p.getMusicState(),this.updateSoundShow(this.soundState),this.scheduleOnce((()=>{u.instance.airdropParent=this.airdropParent}),.1),await super.onShow(e),p.playBGM(g.bgm1)}async onHide(e){u.instance.airdropParent=void 0,d.targetOff(this),super.onHide(e)}onSoundTouchHanler(){p.playSFX(g.click),this.soundState=!this.soundState,this.updateSoundShow(this.soundState),p.mucSwitch(this.soundState)}updateSoundShow(e){}shareBtnHandler(){u.instance.share("times")}rankBtnHandler(){h.show("Rank")}async drawBtnHandler(){await Promise.all([b.moduleManager("uiPopupManager").showLoading("Loaing..."),h.preload("PrizeDraw")]),h.panelStack.push({names:"mainPanel"}),await h.show("PrizeDraw"),h.destroy("mainPanel"),b.moduleManager("uiPopupManager").hideLoading()}copyBtnHandler(){console.log("点击了复制按钮"),m.copyTextToClipboard(f.Instance.getTelegramInitData())}copyUidBtnHandler(){console.log("点击了复制按钮 --copy uid"),m.copyTextToClipboard(u.instance.userInfo.id)}async gameStartBtnHandler(){S.soloFunction((async()=>{await b.moduleManager("uiPopupManager").showLoading("Loading...");const[e,t]=await Promise.all([h.preload("gamePanel"),u.instance.gameServer.startGame()]);if(!t)return y.instance.getManager("uiPopupManager").showTips(w.translate("gameCountLess0")),void b.moduleManager("uiPopupManager").hideLoading();await h.show("gamePanel"),h.destroy("mainPanel"),b.moduleManager("uiPopupManager").hideLoading()}),"onStartGame")}async destroySelf(e,t,a){await super.destroySelf(e,!0,a)}}).prototype,"airdropParent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(H.prototype,"remainCountLab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(H.prototype,"adsSprite",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(H.prototype,"adLayout",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=H))||C));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/mainPanel', 'chunks:///_virtual/mainPanel'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});