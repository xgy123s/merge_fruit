System.register("chunks:///_virtual/PrizePreviewScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadUtil.ts","./NodePoolUtil.ts"],(function(e){var t,i,o,r,s,n,l,a,c,p,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e.Node,s=e._decorator,n=e.Component,l=e.UITransform,a=e.Vec3,c=e.Sprite,p=e.Label},function(e){h=e.default},function(e){u=e.default}],execute:function(){var d,z,m,P,g,f,b,N,w;o._RF.push({},"39312hgZChC5amAO6OvLi9Y","PrizePreviewScroll",void 0);const{ccclass:v,property:y}=s;e("PrizePreviewScroll",(d=v("PrizePreviewScroll"),z=y(r),m=y(r),d((f=t((g=class extends n{constructor(){super(...arguments),i(this,"prizeTemplate",f,this),i(this,"content",b,this),i(this,"spacing",N,this),i(this,"scrollSpeed",w,this),this.prizes=[],this.prizeData=[],this.poolName="PrizeNodePool",this._curIdx=0}onLoad(){this.schedule(this.autoScroll,.02)}onEnable(){this._curIdx=0,u.havePool(this.poolName)||u.createNodePool(this.poolName,this.prizeTemplate,10)}onDisable(){this.clearPrizes(),u.destroyNodePool(this.poolName)}updatePrizeData(e){this.prizeData=e,this.populatePrizes()}populatePrizes(){this.clearPrizes(),this.prizes=[];let e=-this.content.getComponent(l).width/2;const t=this.prizeTemplate.getComponent(l).width+this.spacing;for(;e<this.content.getComponent(l).width;)this.addPrizeItem(e+t/2),e+=t}addPrizeItem(e){let t=u.getNodeFromPool(this.poolName);if(!t)return;t.parent=this.content,t.setPosition(new a(e,0,0)),t.active=!0;const i=this._curIdx%this.prizeData.length,o=this.prizeData[i],r=t.getComponentInChildren(c);r&&h.getSpriteFrameIntelligent(o.icon,(e=>{this&&this.isValid&&e&&(r.spriteFrame=e)}));const s=t.getComponentInChildren(p);s&&(s.string=o.name),this.prizes.push(t),this._curIdx++}clearPrizes(){this.prizes.forEach((e=>{e.active=!1,u.recycleNode(this.poolName,e)})),this.prizes=[]}autoScroll(){if(this.prizes.forEach((e=>{let t=e.getPosition();t.x-=this.scrollSpeed,e.setPosition(t)})),this.prizes.length>0){const e=this.prizes[0],t=this.prizes[this.prizes.length-1],i=e.getComponent(l).width+this.spacing;if(e.getPosition().x+i/2<-this.content.getComponent(l).width/2){e.active=!1,u.recycleNode(this.poolName,e),this.prizes.shift();const o=t.getPosition().x+i;this.addPrizeItem(o)}}}}).prototype,"prizeTemplate",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(g.prototype,"spacing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),w=t(g.prototype,"scrollSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),P=g))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/Rank",["./Rank.ts","./RankItem.ts","./PrizePreviewScroll.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Rank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionUtil.ts","./NodeUtil.ts","./BundleLayer.ts","./CustomScrollViewWithPrefab.ts","./AudioManage.ts","./GameGlobal.ts","./RankItem.ts","./PrizePreviewScroll.ts"],(function(e){var t,i,n,a,o,r,l,s,c,u,h,d,p,f,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,o=e.Label,r=e.Button,l=e._decorator},function(e){s=e.default},function(e){c=e.NodeUtil},function(e){u=e.default},function(e){h=e.CustomScrollViewWithPrefab},function(e){d=e.AudioManage,p=e.SoundList},function(e){f=e.GameGlobal},function(e){m=e.RankItem},function(e){b=e.PrizePreviewScroll}],execute:function(){var w,y,g,S,k,v,z,P,L,T,_,R,B,D,I;n._RF.push({},"8ab6f0IndlGpKhAHhjp36K/","Rank",void 0);const{ccclass:C,property:V}=l;e("Rank",(w=C("Rank"),y=V(a),g=V(h),S=V(o),k=V(r),v=V(b),z=V(m),w((T=t((L=class extends u{constructor(){super(...arguments),i(this,"content",T,this),i(this,"rankScrollView",_,this),i(this,"endTimeLabel",R,this),i(this,"closeButton",B,this),i(this,"prizePreviewScroll",D,this),i(this,"myself",I,this),this._endTime=0}get serverConfig(){return f.instance.serverConfig}async onInit(){this.schedule((()=>{this._updateEndTime()})),this.rankScrollView.setPrefabData(((e,t,i)=>{t.getComponent(m).setInfo(e)}))}async onShow(){this.endTimeLabel.node.parent.active=!1,this._showPrize(),this._showRank(),s.show(this.content,{type:"scale",duration:.3})}async onHide(e){await s.hide(this.content,{type:"scale",duration:.3})}async _showPrize(){const e=await f.instance.gameServer.getPrizeData();e&&e.length&&this.prizePreviewScroll.updatePrizeData(e)}async _showRank(){const e=await f.instance.gameServer.getRankInfo();this._endTime=e?.endTime||0,this._updateEndTime(),e&&(this.rankScrollView.dateList=e.rankList,this.myself.setInfo(e.myRank))}_updateEndTime(){const e=f.instance.getLeftTimeStr(this._endTime);e?(this.endTimeLabel.node.parent.active=!0,this.endTimeLabel.string=e):this.endTimeLabel.node.parent.active=!1}start(){c.ListenBtnsClick([this.closeButton],((e,t)=>{switch(d.playSFX(p.click),e.node.name){case"closeButton":this.hideSelf()}}),this)}onEnable(){}onDisable(){}update(e){}}).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(L.prototype,"rankScrollView",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(L.prototype,"endTimeLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(L.prototype,"closeButton",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(L.prototype,"prizePreviewScroll",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(L.prototype,"myself",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=L))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/RankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadUtil.ts","./NodeUtil.ts"],(function(e){var t,i,r,a,n,l,s,o,p,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Label,n=e.Sprite,l=e.SpriteFrame,s=e._decorator,o=e.Component,p=e.Button},function(e){u=e.default},function(e){c=e.NodeUtil}],execute:function(){var m,b,h,g,k,d,f,L,S,y,B,w,z,N,F,I,R,_,v;r._RF.push({},"81ad9JY5HdBTreY8ykNjFBP","RankItem",void 0);const{ccclass:C,property:D}=s;e("RankItem",(m=C("RankItem"),b=D(a),h=D(n),g=D(a),k=D(a),d=D(n),f=D(n),L=D([l]),S=D([l]),m((w=t((B=class extends o{constructor(){super(...arguments),i(this,"rankLabel",w,this),i(this,"awardSprite",z,this),i(this,"scoreLabel",N,this),i(this,"nameLabel",F,this),i(this,"itemBg",I,this),i(this,"rankNumBg",R,this),i(this,"itemBgSprList",_,this),i(this,"rankNumSprList",v,this),this._rankId=0}start(){c.BtnOnClick(this.awardSprite.node.getComponent(p),(()=>{}))}update(e){}setInfo(e){this._rankId=e.rank,this.rankLabel.string=""+e.rank,this.scoreLabel.string=""+e.score,this.nameLabel.string=e.name,this.rankNumSprList[e.rank-1]&&(this.rankNumBg.spriteFrame=this.rankNumSprList[e.rank-1],this.itemBg.spriteFrame=this.itemBgSprList[e.rank-1]);const t=e.prize?.prizes?.[0];this.awardSprite.node.active=!!t,t&&u.getSpriteFrameIntelligent(t.icon,(e=>{this.isValid&&e&&(this.awardSprite.spriteFrame=e)}))}}).prototype,"rankLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(B.prototype,"awardSprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(B.prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(B.prototype,"nameLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(B.prototype,"itemBg",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(B.prototype,"rankNumBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(B.prototype,"itemBgSprList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(B.prototype,"rankNumSprList",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=B))||y));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Rank', 'chunks:///_virtual/Rank'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});