System.register("chunks:///_virtual/RewardSimpleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskRepeater.ts"],(function(e){var t,i,r,a,n,o,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Sprite,n=e.Label,o=e._decorator,l=e.Component,s=e.isValid},function(e){c=e.TaskRepeater}],execute:function(){var p,u,d,m,y,h,w;r._RF.push({},"1ada2IkTNtOI7Hg4N3q2Rzq","RewardSimpleItem",void 0);const{ccclass:g,property:R}=o;e("RewardSimpleItem",(p=g("RewardSimpleItem"),u=R(a),d=R(n),p((h=t((y=class extends l{constructor(){super(...arguments),i(this,"icon",h,this),i(this,"quantity",w,this)}onLoad(){this.destroy=()=>(s(this.node)&&c.NodePoolUtil.recycleNode("taskItem_reward",this.node),!0)}async init(e){this.icon.spriteFrame=await c.LoadUtil.getSpriteFrameIntelligent(e.rewardPic),this.quantity.string=`x${e.rewardValue}`}}).prototype,"icon",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"quantity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=y))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/TaskBundles",["./RewardSimpleItem.ts","./TaskDialog.ts","./TaskItem.ts","./TaskPanel.ts","./TaskReward.ts","./TaskRewardItem.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/TaskDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskDeclare.ts","./TaskRepeater.ts","./TaskDisplayBase.ts","./RewardSimpleItem.ts"],(function(t){var e,i,n,a,s,r,o,c,l,h,p,u,g,b,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Label,s=t.Sprite,r=t.Node,o=t.Button,c=t.Prefab,l=t._decorator,h=t.UITransform,p=t.instantiate},function(t){u=t.TaskDialogType},function(t){g=t.TaskRepeater},function(t){b=t.TaskDisplayBase},function(t){d=t.RewardSimpleItem}],execute:function(){var f,m,I,v,w,_,k,y,D,S,L,T,P,z,C,R,B,x,N;n._RF.push({},"63765LWzUVP2qGOHnQuPk/L","TaskDialog",void 0);const{ccclass:F,property:U}=l;t("TaskDialog",(f=F("TaskDialog"),m=U(a),I=U(s),v=U(a),w=U(a),_=U(a),k=U(r),y=U(o),D=U(c),f((T=e((L=class extends b{constructor(){super(...arguments),i(this,"npcName",T,this),i(this,"npcIcon",P,this),i(this,"title",z,this),i(this,"chat",C,this),i(this,"describeLab",R,this),i(this,"rewardParent",B,this),i(this,"functionBtn",x,this),i(this,"RewardItem",N,this),this.curStep=0,this._taskDialogInfo=void 0,this._btnLabel=void 0,this._btnSprite=void 0}async onShow(t){if(this.node.active=!0,this.curStep=0,!t)return void this.hideSelf();this._btnLabel=this.functionBtn.getComponentInChildren(a),this._btnSprite=this.functionBtn.getComponent(s);const e=this._taskDialogInfo=t,i=e.detailInfo[e.taskProgress.progressIndex];console.log("对话类型:",i.triggerType),console.log("对话具体ID:",i.triggerId),this._nextDialog(i.dialogList)}_nextDialog(t){this._btnLabel.string="下一步";const e=t[this.curStep];switch(this.title.node.active=this.describeLab.node.active=this.rewardParent.active=!1,this.npcIcon.node.active=this.npcName.node.active=!0,e.targetType){case u.myself:this.npcName.string="自己";break;case u.none:this.npcIcon.node.active=this.npcName.node.active=!1;break;case u.npc:this.npcName.string=e.targetId}this.chat.string=e.text,this.function_receive=()=>{this.curStep++,this.curStep>=t.length?(this._btnLabel.string="立即前往",this._reportCurProcess()):this._nextDialog(t)}}async _reportCurProcess(){const t=this._taskDialogInfo.basicInfo;this.title.node.active=this.rewardParent.active=!0,this.chat.node.active=!(this.describeLab.node.active=!0),this.title.string=t.title,this.describeLab.string=t.describe,g.LoadUtil.getSpriteFrameIntelligent(t.icon,(t=>{if(t){const e=200/t.width;this.npcIcon.getComponent(h)?.setContentSize(200,t.height*e),this.npcIcon.spriteFrame=t}}));for(let e=0;e<t.reward.length;e++){const i=p(this.RewardItem);i&&(i.getComponent(d)?.init(t.reward[e]),this.rewardParent.addChild(i))}this.function_receive=async()=>{this._taskDialogInfo.taskProgress.completeValue++,await(this.receiveTaskFunc?.(this._taskDialogInfo,1)),this.hideSelf()}}function_receive(){}}).prototype,"npcName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(L.prototype,"npcIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(L.prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(L.prototype,"chat",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(L.prototype,"describeLab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(L.prototype,"rewardParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(L.prototype,"functionBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(L.prototype,"RewardItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=L))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./moment.mjs_cjs=&original=.js","./RewardSimpleItem.ts","./TaskDeclare.ts","./TaskRepeater.ts","./moment.js"],(function(t){var e,i,s,a,n,r,o,l,c,h,u,b,d,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,a=t.Label,n=t.Sprite,r=t.Button,o=t.Node,l=t.Prefab,c=t._decorator,h=t.Component,u=t.isValid},null,function(t){b=t.RewardSimpleItem},function(t){d=t.TaskState},function(t){p=t.TaskRepeater},function(t){f=t.default}],execute:function(){var m,_,k,g,I,S,w,P,v,y,T,L,R,U,F,z,B,C,N;s._RF.push({},"2b939LL0kNCBbxe6zYf8ExG","TaskItem",void 0);const{ccclass:D,property:j}=c,V="taskItem_reward";t("TaskItem",(m=D("TaskItem"),_=j(a),k=j(a),g=j(n),I=j(a),S=j(a),w=j(r),P=j(o),v=j(l),m((L=e((T=class extends h{constructor(){super(...arguments),i(this,"title",L,this),i(this,"describe",R,this),i(this,"icon",U,this),i(this,"cProcess",F,this),i(this,"tProcess",z,this),i(this,"functionBtn",B,this),i(this,"rewardItemParent",C,this),i(this,"RewardItem",N,this),this._info=void 0,this._operateInfo=void 0,this._btnLabel=void 0,this._btnSprite=void 0,this.realCallFunc=void 0,this.taskStatusUnStart=void 0,this.taskStatusInTask=void 0,this.taskStatusReceiveAward=void 0}initTaskInfo(t,e){this._btnLabel||(this._btnLabel=this.functionBtn.getComponentInChildren(a)),this._btnSprite||(this._btnSprite=this.functionBtn.getComponent(n)),this._info=t,this._operateInfo=e,this._updateUIInfo(t.basicInfo),this._updateRewardItem(t.basicInfo),this._refreshState()}_refreshState(){const t=this._operateInfo,e=!!t;this.cProcess.node.active=e,this.tProcess.node.active=e,t&&(this.cProcess.string=t.completeValue+"",this.tProcess.string=`/ ${t.operateValue}`),this._checkTaskStatus()}_updateUIInfo(t){this.title.string=t.title,this.describe.string=t.describe,p.LoadUtil.getSpriteFrameIntelligent(t.icon,(t=>{this&&u(this)&&(this.icon.spriteFrame=t)}))}_updateRewardItem(t){p.NodePoolUtil.havePool(V)||p.NodePoolUtil.createNodePool(V,this.RewardItem),this.rewardItemParent.children.forEach((t=>{p.NodePoolUtil.recycleNode(V,t)}));for(let e=0;e<t.reward.length;e++){const i=p.NodePoolUtil.getNodeFromPool(V);i&&(i.getComponent(b)?.init(t.reward[e]),this.rewardItemParent.addChild(i))}}_checkTaskStatus(){switch(this.functionBtn.interactable=!0,this._btnSprite.grayscale=!1,this._info.taskProgress.taskState){case d.unEnable:this._taskStatusUnable();break;case d.unStart:this._btnLabel.string="开始任务",this.taskStatusUnStart?.();break;case d.inTask:this._btnLabel.string="前往",this.taskStatusInTask?.();break;case d.receiveAward:this._btnLabel.string="领取奖励",this.taskStatusReceiveAward?.();break;case d.finished:this._taskStatusFinished()}}_taskStatusUnable(){let t="",e=this._info.taskLife.enableTime[0],i=Date.now(),s=f(e);t=e-i>864e5?s.format("MM[月]DD[日]"):s.format("HH:mm"),this._btnLabel.string=t+"开始",this._btnSprite.grayscale=!0,this.functionBtn.interactable=!1}_taskStatusFinished(){this._btnLabel.string="已完成";const t=this._operateInfo,e=!!t;this.cProcess.node.active=e,this.tProcess.node.active=e,t&&(this.cProcess.string=t.completeValue+"",this.tProcess.string=`/ ${t.operateValue}`),this._btnSprite.grayscale=!0,this.functionBtn.interactable=!1}function_receive(){p.TimeUtil.soloFunction((async()=>{this.realCallFunc&&await this.realCallFunc(),this._refreshState()}),"taskOperate")}}).prototype,"title",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(T.prototype,"describe",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(T.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(T.prototype,"cProcess",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(T.prototype,"tProcess",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(T.prototype,"functionBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(T.prototype,"rewardItemParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(T.prototype,"RewardItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=T))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskRepeater.ts","./TaskItem.ts","./TaskDisplayBase.ts","./CustomScrollViewWithPrefab.ts"],(function(e){var t,a,s,i,l,n,o,r,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Node,l=e._decorator},function(e){n=e.TaskRepeater},function(e){o=e.TaskItem},function(e){r=e.TaskDisplayBase},function(e){c=e.CustomScrollViewWithPrefab}],execute:function(){var u,k,d,h,f,p,P;s._RF.push({},"689a2xmmtNFLpYqZZlmFWD8","TaskPanel",void 0);const{ccclass:y,property:w}=l;e("TaskPanel",(u=y("TaskPanel"),k=w(i),d=w(c),u((p=t((f=class extends r{constructor(){super(...arguments),a(this,"Page",p,this),a(this,"ScrollViewPrefab",P,this)}async onShow(e){this.node.active=!0,n.ActionUtil.show(this.Page,{type:"scale"}),this.ScrollViewPrefab.dateList=e,this.ScrollViewPrefab.setPrefabData(((t,a,s)=>{const i=e.find((e=>e.taskId==t.taskId)),l=a.getComponent(o);l.taskStatusUnStart=()=>{l.realCallFunc=async()=>{const e=await(this.takeInTaskFunc?.(i.taskId));console.log("任务接取"+(e?"成功":"失败"))}},l.taskStatusInTask=()=>{l.realCallFunc=async()=>{await(this.doTaskFunc?.(i.taskId))&&this.hideSelf()}},l.taskStatusReceiveAward=()=>{l.realCallFunc=async()=>{await(this.receiveTaskFunc?.(i.taskId))&&this.hideSelf()}},l.initTaskInfo(i,this.getOperateInfoInCtr?.(i.taskId))}))}async destroySelf(){await n.ActionUtil.hide(this.Page,{type:"scale"}),n.NodePoolUtil.destroyNodePool("taskItem_reward"),this.hideSelf()}}).prototype,"Page",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(f.prototype,"ScrollViewPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskRewardItem.ts","./TaskDisplayBase.ts"],(function(e){var t,a,r,i,s,n,o,c,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Node,s=e.Prefab,n=e._decorator,o=e.instantiate},function(e){c=e.TaskRewardItem},function(e){d=e.TaskDisplayBase}],execute:function(){var l,u,h,p,f,w,k;r._RF.push({},"42778EopjdM97tu/ncYThKd","TaskReward",void 0);const{ccclass:_,property:b}=n;e("TaskReward",(l=_("TaskReward"),u=b(i),h=b(s),l((w=t((f=class extends d{constructor(){super(...arguments),a(this,"rewardParent",w,this),a(this,"rewardPre",k,this),this._task_info=void 0}async onShow(e){if(this.node.active=!0,e){this._task_info=e;for(let t=0;t<e.basicInfo.reward.length;t++){const a=o(this.rewardPre);a&&(a.getComponent(c)?.init(e.basicInfo.reward[t]),this.rewardParent.addChild(a))}}}async btn_receivce(){this._task_info&&await(this.receiveTaskFunc?.(this._task_info.taskId)),this.hideSelf()}}).prototype,"rewardParent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(f.prototype,"rewardPre",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=f))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/TaskRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskRepeater.ts"],(function(e){var t,r,i,a,n,s,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Sprite,n=e.Label,s=e._decorator,l=e.Component},function(e){o=e.TaskRepeater}],execute:function(){var c,p,u,d,m,f,w;i._RF.push({},"cf3a6GYj8dLLJnpLUsUOWc7","TaskRewardItem",void 0);const{ccclass:b,property:g}=s;e("TaskRewardItem",(c=b("TaskRewardItem"),p=g(a),u=g(n),c((f=t((m=class extends l{constructor(){super(...arguments),r(this,"icon",f,this),r(this,"explain",w,this)}init(e){o.LoadUtil.getSpriteFrameIntelligent(e.rewardPic,(e=>{this.icon.spriteFrame=e})),this.explain.string=`${e.rewardName} x${e.rewardValue}`}}).prototype,"icon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(m.prototype,"explain",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=m))||d));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/TaskBundles', 'chunks:///_virtual/TaskBundles'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});